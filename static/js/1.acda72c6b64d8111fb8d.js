webpackJsonp([1],{dol9:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Details",[r("div",{staticClass:"is-node",attrs:{id:"write"}},[r("h1",[r("a",{staticClass:"md-header-anchor ",attrs:{name:"header-n0"}}),t._v("Vue跨域请求")]),r("h3",[r("a",{staticClass:"md-header-anchor ",attrs:{name:"header-n18"}}),t._v("1. 在 config/index.js 配置文件中配置proxyTable 注意此配置在线上无效，只能在本地使用，需要做环境判断在dev:里面添加一下代码")]),r("pre",{staticClass:"md-fences md-end-block",attrs:{lang:""}},[t._v(" "),r("div",{staticClass:"CodeMirror cm-s-inner CodeMirror-wrap"},[r("div",{staticStyle:{overflow:"hidden",position:"relative",width:"3px",height:"0px",top:"4px",left:"4px"}}),r("div",{staticClass:"CodeMirror-scrollbar-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-gutter-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-scroll",attrs:{tabindex:"-1"}},[r("div",{staticClass:"CodeMirror-sizer",staticStyle:{"margin-left":"0px","margin-bottom":"0px","border-right-width":"30px","padding-right":"0px","padding-bottom":"0px"}},[r("div",{staticStyle:{position:"relative",top:"0px"}},[r("div",{staticClass:"CodeMirror-lines",attrs:{role:"presentation"}},[r("div",{staticStyle:{position:"relative",outline:"none"},attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-measure"},[r("pre",[t._v("x")])]),r("div",{staticClass:"CodeMirror-measure"}),r("div",{staticStyle:{position:"relative","z-index":"1"}}),r("div",{staticClass:"CodeMirror-code",attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-activeline",staticStyle:{position:"relative"}},[r("div",{staticClass:"CodeMirror-activeline-background CodeMirror-linebackground"}),r("div",{staticClass:"CodeMirror-gutter-background CodeMirror-activeline-gutter",staticStyle:{left:"0px",width:"0px"}}),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("proxyTable: { ")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    '/apis': { ")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("        target: '线上域名', //源地址 ")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("        changeOrigin: true, //改变源 ")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("        pathRewrite: { ")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("            '^/apis': '' //路径重写 ")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("        } ")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    } ")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("},")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[r("span",{attrs:{"cm-text":""}},[t._v("​")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("使用时，/apis+后面的接口地址")])])])])])])])]),r("div",{staticStyle:{position:"absolute",height:"30px",width:"1px","border-bottom":"0px solid transparent",top:"294px"}}),r("div",{staticClass:"CodeMirror-gutters",staticStyle:{display:"none",height:"324px"}})])])]),r("h3",[r("a",{staticClass:"md-header-anchor ",attrs:{name:"header-n38"}}),t._v("2.fetch实现跨域请求——在根组件")]),r("p",[t._v("App.vue里面发送请求")]),r("pre",{staticClass:"md-fences md-end-block",staticStyle:{"break-inside":"unset"},attrs:{lang:""}},[t._v(" "),r("div",{staticClass:"CodeMirror cm-s-inner CodeMirror-wrap"},[r("div",{staticStyle:{overflow:"hidden",position:"relative",width:"3px",height:"0px",top:"4px",left:"4px"}}),r("div",{staticClass:"CodeMirror-scrollbar-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-gutter-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-scroll",attrs:{tabindex:"-1"}},[r("div",{staticClass:"CodeMirror-sizer",staticStyle:{"margin-left":"0px","margin-bottom":"0px","border-right-width":"30px","padding-right":"0px","padding-bottom":"0px"}},[r("div",{staticStyle:{position:"relative",top:"0px"}},[r("div",{staticClass:"CodeMirror-lines",attrs:{role:"presentation"}},[r("div",{staticStyle:{position:"relative",outline:"none"},attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-measure"},[r("pre",[t._v("x")])]),r("div",{staticClass:"CodeMirror-measure"}),r("div",{staticStyle:{position:"relative","z-index":"1"}}),r("div",{staticClass:"CodeMirror-code",attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-activeline",staticStyle:{position:"relative"}},[r("div",{staticClass:"CodeMirror-activeline-background CodeMirror-linebackground"}),r("div",{staticClass:"CodeMirror-gutter-background CodeMirror-activeline-gutter",staticStyle:{left:"0px",width:"0px"}}),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("created(){")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    //fetch实现跨域请求")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v('    fetch("/apis/user.php",{')])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v('      method:"POST",')])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      headers:{")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v('        token:"f4c902c9ae5a2a9d8f84868ad064e706"')])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      },")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v('      body:JSON.stringify({username:"xxx",password:"123"})')])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    }).then(result=>{")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      // console.log(result)")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      //解析数据")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      return result.json()")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    }).then(data =>{")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("      //打印数据      console.log(data);")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    })")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[r("span",{attrs:{"cm-text":""}},[t._v("​")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v(" }")])])])])])])])]),r("div",{staticStyle:{position:"absolute",height:"30px",width:"1px","border-bottom":"0px solid transparent",top:"450px"}}),r("div",{staticClass:"CodeMirror-gutters",staticStyle:{display:"none",height:"480px"}})])])]),r("h3",[r("a",{staticClass:"md-header-anchor ",attrs:{name:"header-n68"}}),t._v("3.axios实现跨域请求")]),r("ul",[r("li",[r("p",[t._v("3.1安装axios：npm install axios --save-dev")]),r("p",[t._v("在main.js导入axiosb")])]),r("li",[r("p",[t._v("3.2全局使用axios")]),r("p",[t._v("Vue.prototype.$axios = axios")]),r("p",[t._v(" ")]),r("p",[t._v("页面中使用")]),r("pre",{staticClass:"md-fences md-end-block",attrs:{lang:""}},[t._v(" "),r("div",{staticClass:"CodeMirror cm-s-inner CodeMirror-wrap"},[r("div",{staticStyle:{overflow:"hidden",position:"relative",width:"3px",height:"0px",top:"4px",left:"4px"}}),r("div",{staticClass:"CodeMirror-scrollbar-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-gutter-filler",attrs:{"cm-not-content":"true"}}),r("div",{staticClass:"CodeMirror-scroll",attrs:{tabindex:"-1"}},[r("div",{staticClass:"CodeMirror-sizer",staticStyle:{"margin-left":"0px","margin-bottom":"0px","border-right-width":"30px","padding-right":"0px","padding-bottom":"0px"}},[r("div",{staticStyle:{position:"relative",top:"0px"}},[r("div",{staticClass:"CodeMirror-lines",attrs:{role:"presentation"}},[r("div",{staticStyle:{position:"relative",outline:"none"},attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-measure"},[r("pre",[t._v("x")])]),r("div",{staticClass:"CodeMirror-measure"}),r("div",{staticStyle:{position:"relative","z-index":"1"}}),r("div",{staticClass:"CodeMirror-code",attrs:{role:"presentation"}},[r("div",{staticClass:"CodeMirror-activeline",staticStyle:{position:"relative"}},[r("div",{staticClass:"CodeMirror-activeline-background CodeMirror-linebackground"}),r("div",{staticClass:"CodeMirror-gutter-background CodeMirror-activeline-gutter",staticStyle:{left:"0px",width:"0px"}}),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("axios({")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[r("span",{staticClass:"cm-tab",attrs:{role:"presentation","cm-text":"\t"}},[t._v("    ")]),t._v("method:'get',  ")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("    "),r("span",{staticClass:"cm-tab",attrs:{role:"presentation","cm-text":"\t"}},[t._v("    ")]),t._v("url:'www.xxx.com/user/user.php'")])])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("     }).then(function(resp){")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("     "),r("span",{staticClass:"cm-tab",attrs:{role:"presentation","cm-text":"\t"}},[t._v("   ")]),t._v("console.log(resp.data);")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("     }).catch(resp => {")])]),r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("     "),r("span",{staticClass:"cm-tab",attrs:{role:"presentation","cm-text":"\t"}},[t._v("   ")]),t._v("// console.log(resp);")])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("       console.log('请求败：'+resp.status+','+resp.statusText);")])])]),r("div",{staticStyle:{position:"relative"}},[r("pre",{staticClass:" CodeMirror-line ",attrs:{role:"presentation"}},[r("span",{staticStyle:{"padding-right":"0.1px"},attrs:{role:"presentation"}},[t._v("});")])])])])])])])]),r("div",{staticStyle:{position:"absolute",height:"30px",width:"1px","border-bottom":"0px solid transparent",top:"242px"}}),r("div",{staticClass:"CodeMirror-gutters",staticStyle:{display:"none",height:"272px"}})])])]),r("p",[t._v(" ")])])])])])},staticRenderFns:[]},s=r("VU/8")({name:"vue_qingqiu"},i,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=1.acda72c6b64d8111fb8d.js.map